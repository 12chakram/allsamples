<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jsp/jstl/core"	
	xmlns:rich="http://richfaces.org/rich">
	<f:subview id="createHouseholdId" rendered="#{householdRegistrationBean.registrationValueMap.isValidForm eq 'false'}">
		<script type="text/javascript">
			window.onload = function() {
				 document.getElementById('frmCreateHousehold:createHouseholdButton').focus();
		 	}
</script>
	</f:subview>
	<script type="text/javascript">
		function submitFormDetails(){
        	document.getElementById('frmCreateHousehold:createHouseholdButton').click();
        	}

		function changeHashOnLoad() {
		    window.location.href += "#";
		    setTimeout("changeHashAgain()", 1); 
		}

		function changeHashAgain() {
		window.location.href += "1";
		}

		var storedHash = window.location.hash;

		var int=window.setInterval(function () {
		   if (window.location.hash != storedHash) {
		        window.location.hash = storedHash;
		        if (navigator.appName=='Microsoft Internet Explorer')
		        {

		            window.clearInterval(int);
		        }
		   }

		}, 1);

		changeHashOnLoad();	
	
	</script>
	<h:form id="frmCreateHousehold">	
		<h:inputHidden value="#{householdRegistrationBean.registrationValueMap.dobMonthValue}" tabindex="-1" id="dobMonthValue"/>
		<h:inputHidden value="#{householdRegistrationBean.registrationValueMap.dobDateValue}" tabindex="-1" id="dobDateValue"/>
		<h:inputHidden value="#{householdRegistrationBean.registrationValueMap.dobYearValue}" tabindex="-1" id="dobYearValue"/>
		<h:inputHidden value="#{householdRegistrationBean.registrationValueMap.countryName}" tabindex="-1" id="countryName"/>	
<!-- Begin of body content of registration step-3 -->		
		<div class="main_body">
			<div class="create_h_hold_heading">
				<h1>
					<span class="Fleft">
						<h:outputLabel value="#{labelMsgs.householdHeading1} "/><span class="content_standard_color"><h:outputLabel value="#{labelMsgs.householdHeading2} "/></span>
					</span>
				</h1>
				<div class="Cancel_Registration">
					<h:commandLink id="cancelId" tabindex="2" title="#{labelMsgs.cancelRegistration}" value="#{labelMsgs.cancelRegistration}" onclick="return handleSaveChangesPopup(this.id);" action="#{loginNavigationBean.navigationToUnauthHomePage}"/>
				</div>
			</div>
			<div class="body_container_above_gradiant">
				<div class="gradiant_box_left"></div>
				<div class="gradiant_box_middle">
					<img src="#{applicationScope.staticContentBaseUrl}/images/container_top_gradiant.jpg" width="978" height="2" align="top" alt="White_Gray_Gradiant"/>
				</div>
				<div class="gradiant_box_right"></div>
			</div>
		<!-- Begin of Menu indicates steps of the registration  -->
			<div class="h_hold_menu_step2_active">
				<div class="menu_bar_top_shadow"></div>
				<div class="menu_bar_steps">
					<div class="create_h_hold_step_1">
						<div class="step_1_icon"></div>
						<div class="step_1_menu_text">
							<table class="table" cellpadding="0" cellspacing="0">
								<tr>
									<td><h:outputLabel id="regsStep1MessageId" value="#{labelMsgs.regsStep1Message}"/></td>
								</tr>
							</table>
						</div>
					</div>
					
					<div class="create_h_hold_step_2_left"></div>
					<div class="create_h_hold_step_2">
						<div class="step_2_icon"></div>
						<div class="step_2_menu_text">
							<table class="table" cellpadding="0" cellspacing="0">
								<tr>
									<td><h:outputLabel value="#{labelMsgs.regsStep3Message}"/></td>
								</tr>
							</table>
						</div>
					</div>
					<div class="create_h_hold_step_3_right"></div>
				</div>
				<div class="menu_bar_bottom_shadow">
            		<div class="menu_bar_bottom_shadow_left"></div>
                    <div class="menu_bar_bottom_shadow_middle"></div>
                    <div class="menu_bar_bottom_shadow_right"></div>
                </div>
			</div>
		<!--  End of Menu indicates steps of the registration -->
		<!-- Begin of main content of body  -->
			<div class="body_wrapper">	
				<div class="body_wrapper_left_shadow"></div>
				<div class="body_wrapper_container">
					<div class="h_hold_Dob_content">
						<h:outputLabel value="#{labelMsgs.regStep3InfoMsg1}"/><h:outputLabel value="#{labelMsgs.regStep3InfoMsg2}"/><br/><h:outputLabel value="#{labelMsgs.regStep3InfoMsg3}"/> 
					</div>
					<div class="h_hold_email" style="border-bottom:0px;">	
						<div class="userfield_input">
							<strong><h:outputLabel value="#{labelMsgs.firstNameLabel}:" for="frmCreateHousehold:firstName"/></strong><br/>
							<div class="form_inputfield">
								<h:inputText id="firstName" tabindex="4" styleClass="input" autocomplete="off" title="#{labelMsgs.firstNameLabel}" value="#{householdRegistrationBean.registrationValueMap.firstName}" maxlength="50" 
									onfocus="toggleHintMsg('field_hint1','block');toggleHintMsg('firstNameError','none');"
									onblur="toggleHintMsg('field_hint1','none');"/>
							</div>
							<div class="field_hint" id="field_hint1">
								<h:outputLabel value="#{labelMsgs.displaynameHintMsg}"/>
							</div>	
							<div id="firstNameError">	                       	  		
                    			<h:outputLabel id="firstNameErrorMsg" styleClass="#{householdRegistrationBean.errorValueMap.firstNameError ne null?'err_msg':'display:none'}" rendered="#{householdRegistrationBean.errorValueMap.firstNameError ne null}" value="#{householdRegistrationBean.errorValueMap.firstNameError}"/>                       		
                    		</div>						
						</div>
						<div class="userfield_input">
							<strong><h:outputLabel value="#{labelMsgs.lastNameLabel}:" for="frmCreateHousehold:lastName"/></strong><br/>
							<div class="form_inputfield">
								<h:inputText id="lastName" tabindex="5" styleClass="input" autocomplete="off" title="#{labelMsgs.lastNameLabel}" value="#{householdRegistrationBean.registrationValueMap.lastName}" onfocus="toggleHintMsg('lastNameError','none');" maxlength="50" />
							</div>
							<div id="lastNameError">	                       	  		
                    			<h:outputLabel id="lastNameErrorMsg" styleClass="#{householdRegistrationBean.errorValueMap.lastNameError ne null?'err_msg':'display:none'}" rendered="#{householdRegistrationBean.errorValueMap.lastNameError ne null}" value="#{householdRegistrationBean.errorValueMap.lastNameError}"/>                       		
                    		</div>
						</div>
						<div class="userfield_input">
							<strong><h:outputLabel value="#{labelMsgs.emailAddrLabel}:" for="frmCreateHousehold:emailAddr"/></strong><br/>
							<div class="form_inputfield">
								<h:inputText id="emailAddr" tabindex="6" styleClass="input" autocomplete="off" title="#{labelMsgs.emailAddrLabel}" value="#{householdRegistrationBean.registrationValueMap.emailAddress}" maxlength="100" onfocus="toggleHintMsg('frmCreateHousehold:emailErrorRender','none');">
									<a4j:ajax event="blur" render="emailErrorRender" execute="@form"
										listener="#{householdRegistrationBean.checkEmailAvailabilityAction}"
										oncomplete="toggleHintMsg('frmCreateHousehold:emailErrorRender','block');"/>
								</h:inputText>
							</div>
							<h:panelGroup id="emailErrorRender">
								<h:outputLabel styleClass="#{householdRegistrationBean.errorValueMap.emailError ne null &amp;&amp; householdRegistrationBean.errorValueMap.emailType eq 'errorMsg'?'err_msg':householdRegistrationBean.errorValueMap.emailError ne null &amp;&amp; householdRegistrationBean.errorValueMap.emailType eq 'hintMsg'?'err_hint_emailAddress':'err_msg_hide'}" id="emailError"
									value="#{householdRegistrationBean.errorValueMap.emailError}" rendered="#{householdRegistrationBean.errorValueMap.emailError ne null}" />
							</h:panelGroup>
						</div>
						<div class="userfield_input">
							<strong><h:outputLabel value="#{labelMsgs.usernameLabel}:" for="frmCreateHousehold:userName" /></strong><br/>
							<div class="form_inputfield">
								<h:inputText id="userName" tabindex="7" title="#{labelMsgs.usernameLabel}" styleClass="input" autocomplete="off" value="#{householdRegistrationBean.registrationValueMap.userName}" maxlength="64" 
									onfocus="toggleHintMsg('field_hint','block'); toggleHintMsg('frmCreateHousehold:userNotAvailableRender','none');">
									<a4j:ajax event="blur" render="userNotAvailableRender" execute="@form"
										listener="#{householdRegistrationBean.checkAvailabilityAction}" 
										oncomplete="toggleHintMsg('field_hint','none');toggleHintMsg('frmCreateHousehold:userNotAvailableRender','block');"/>
								</h:inputText>
							</div>
							
							<div class="field_hint_username" id="field_hint">
								<h:outputLabel value="#{labelMsgs.usernameHintMsg}"/>
							</div>
							<h:panelGroup id="userNotAvailableRender">
									<h:outputLabel id="userNotAvailableId" rendered="#{householdRegistrationBean.errorValueMap.usernameError ne null}"
										styleClass="#{householdRegistrationBean.errorValueMap.usernameError ne null ? 'err_msg':'disply:none;'}"
										value="#{householdRegistrationBean.errorValueMap.usernameError}"/>
							</h:panelGroup>
						</div>
						<div class="userfield_input">
							<strong><h:outputLabel value="#{labelMsgs.uvPasswordLabel}:" for="frmCreateHousehold:password"/></strong><br/>
							<div class="form_inputfield">
								<h:inputSecret id="password" tabindex="8" title="#{labelMsgs.uvPasswordLabel}" value="#{householdRegistrationBean.registrationValueMap.password}" maxlength="64"
									onfocus="toggleHintMsg('field_hint2','block'); toggleHintMsg('passwordError','none'); " styleClass="input" autocomplete="off"
									onblur="toggleHintMsg('field_hint2','none');"/>
							</div>
							<div class="field_hint" id="field_hint2">
								<h:outputLabel value="#{labelMsgs.passwordHintMsg}"/>
							</div>
							<div id="passwordError">
								<h:outputLabel value="#{householdRegistrationBean.errorValueMap.passwordError}" id="passwordError"
								 styleClass="#{householdRegistrationBean.errorValueMap.passwordError ne null?'err_msg':'err_msg_hide'}" rendered="#{householdRegistrationBean.errorValueMap.passwordError ne null}"/>
							</div>
						</div>
						<div class="userfield_input">
							<strong><h:outputLabel value="#{labelMsgs.uvConfPasswordLabel}:" for="frmCreateHousehold:confPassword"/></strong><br/>
							<div class="form_inputfield">
								<h:inputSecret id="confPassword" tabindex="9" autocomplete="off" styleClass="input" title="#{labelMsgs.uvConfPasswordLabel}" onfocus="toggleHintMsg('cnfPasswordError','none');" value="#{householdRegistrationBean.registrationValueMap.confirmPassword}" maxlength="64"/>
							</div>
							<div id="cnfPasswordError">
								<h:outputLabel rendered="#{householdRegistrationBean.errorValueMap.confirmPasswordError ne null}" id="cnfPasswordError"
								value="#{householdRegistrationBean.errorValueMap.confirmPasswordError}" styleClass="#{householdRegistrationBean.errorValueMap.confirmPasswordError ne null?'err_msg':'err_msg_hide' }"/>
							</div>
						</div>
						
						<div class="userfield_textarea" style="padding-top: 10px;">
							<strong><h:outputLabel value="#{labelMsgs.termsOfUseLabel}" for="frmCreateHousehold:termsOfUseCheckbox"/></strong> <br />
							<div class="form_input_checkbox" style="width:737px;">
								<h:selectBooleanCheckbox id="termsOfUseCheckbox" tabindex="10" title="#{labelMsgs.termsOfUseLabel}" onclick="toggleHintMsg('termsOfUseError','none');" value="#{householdRegistrationBean.registrationValueMap.termsOfUse}"/>
								<div class="Fleft paddingLeft8 iePaddingLeft5" style="padding-top:2px;">
									<h:outputLabel value="#{labelMsgs.readAndAgreeTermsOfUse}"/>
									<a id="termsOfUseLableId" tabindex="11" title="#{labelMsgs.termsOfUse}" onclick="javascript:Clickheretoprint('#{applicationScope.staticContentBaseUrl}','printable_area');">#{labelMsgs.termsOfUse}</a>
									<h:outputLabel value="#{labelMsgs.andLabel}"/>
									<a id="privacyPolicyLableId" tabindex="12" title="#{labelMsgs.creatPrivacyPolicy}" onclick="javascript:Clickheretoprint('#{applicationScope.staticContentBaseUrl}','privacy_printable_area');">#{labelMsgs.creatPrivacyPolicy}</a>
								</div>
								<div class="printable_version" style="width:auto;">
									<a id="printFriendlyLableId" tabindex="13" title="#{labelMsgs.printLabel}" onclick="javascript:Clickheretoprint('#{applicationScope.staticContentBaseUrl}','printable_area');">#{labelMsgs.printLabel}</a>
								</div>
								<div id="termsOfUseError" style="clear:both;">
									<h:outputLabel value="#{householdRegistrationBean.errorValueMap.termsOfUseError}" id="termsOfUseError"
									rendered="#{householdRegistrationBean.errorValueMap.termsOfUseError ne null}" styleClass="#{householdRegistrationBean.errorValueMap.termsOfUseError ne null?'err_msg':'err_msg_hide'}"/>
								</div>
								<div class="teatarea_field">
									<iframe title="printable_area" src="#{applicationScope.consentBaseUrl}#{householdRegistrationBean.registrationValueMap.countryName}#{applicationScope.TOU_URL}" id="printable_area" frameborder="0" scrolling="yes" class="text_area" />
									<iframe src="#{applicationScope.consentBaseUrl}#{householdRegistrationBean.registrationValueMap.countryName}#{applicationScope.PRIVACY_URL}" id="privacy_printable_area" style="display:none;"/>
								</div>
							</div>
						</div>
					</div>
					<div class="h_hold_continue_btn">
						<div class="button_input">
							<h:commandButton id="createHouseholdButton" tabindex="14" styleClass="image_button" title="#{labelMsgs.createHouseholdButtonLabel}" value="#{labelMsgs.createHouseholdButtonLabel}" action="#{householdRegistrationBean.registrationSubmitAction}"/>
						</div>
						<div>
							<h:outputLabel value="#{householdRegistrationBean.errorValueMap.pageError}" id="pageError"
							rendered="#{householdRegistrationBean.errorValueMap.pageError ne null}" styleClass="#{householdRegistrationBean.errorValueMap.pageError ne null?'err_msg':'err_msg_hide'}" style="margin-left: 15px;"/>
						</div>
					</div>
				</div>
				<div class="body_wrapper_right_shadow"></div>
			</div>
			<!-- End of main content of body   -->
		</div>
		<!-- End of body content of registration step-3 -->
	</h:form>
</ui:composition>